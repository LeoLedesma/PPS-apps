"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(I,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>U});var h=r(6814),n=r(95),s=r(6728),m=r(3912),v=r(5861),e=r(6689),f=r(4340),L=r(833),Z=r(3733),y=r(2759),T=r(5748);function b(t,a){1&t&&(e.ynx(0),e.TgZ(1,"small",15),e._uU(2,"Fomato inv\xe1lido"),e.qZA(),e.BQk())}function F(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",15),e._uU(2),e.qZA(),e.BQk()),2&t){const l=e.oxw();e.xp6(2),e.hij("La clave debe tener m\xednimo ",null==l.password?null:l.password.getError("minlength").requiredLength," caracteres")}}const P=[{path:"",component:(()=>{var t;class a{constructor(i,o,c,g,u,d){this.router=i,this.auth=o,this.interceptor=c,this.toastService=g,this.usuariosService=u,this.qr=d,this.selectedValue="",this.volume=!0,this.error="",this.id=""}ngOnInit(){this.loginForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email]),password:new n.NI("",[n.kI.required,n.kI.minLength(6)])}),this.user={uid:{},email:{},pass:{},profile:{}}}get mail(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}changeVol(){"false"==localStorage.getItem("volume")?(localStorage.setItem("volume","true"),this.volume=!0):(localStorage.setItem("volume","false"),this.volume=!1)}limpiar(){this.loginForm.controls.email.setValue(""),this.loginForm.controls.password.setValue(""),this.error=""}goToRegistro(){this.router.navigateByUrl("register")}goToHomeCliente(){this.router.navigateByUrl("/home/cliente")}completarCampos(i){switch(i){case 1:this.error="",this.loginForm.controls.email.setValue("mario@mail.com"),this.loginForm.controls.password.setValue("123456");break;case 2:this.error="",this.loginForm.controls.email.setValue("juan@mail.com"),this.loginForm.controls.password.setValue("123456");break;case 3:this.error="",this.loginForm.controls.email.setValue("leofledesma@gmail.com"),this.loginForm.controls.password.setValue("exeleo12")}}login(i){var o=this;return(0,v.Z)(function*(){try{i.valid&&(o.user.email=i.controls.email.value,o.user.pass=i.controls.password.value,o.interceptor.updateLoadingState(!0),yield o.auth.login(o.user).then(()=>{o.interceptor.updateLoadingState(!1),o.toastService.openSuccessToast("Inici\xf3 sesi\xf3n  exitosamente!","top"),o.router.navigateByUrl("home")}).catch(c=>{console.log(c),o.usuariosService.findUsuario(o.user.email).then(g=>{o.interceptor.updateLoadingState(!1);let u=!0;null!=g&&g.size>0?(g.docs.forEach(d=>{"S"==d.data().pending&&(o.toastService.openWarningToast("Usuario con aprobaci\xf3n pendiente","top"),u=!1)}),u&&o.toastService.openErrorToast("Usuario rechazado","top")):o.toastService.openErrorToast("Usuario o clave incorrecta","top")})}))}catch{o.toastService.openErrorToast("No se pudo conectar al servidor","top")}})()}}return(t=a).\u0275fac=function(i){return new(i||t)(e.Y36(m.F0),e.Y36(f.D),e.Y36(L._),e.Y36(Z.k),e.Y36(y.J),e.Y36(T.x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:29,vars:4,consts:[[1,"bg"],[2,"display","flex","justify-content","center"],["src","../../../assets/images/icon.png",2,"max-width","70%","margin-top","10%"],[3,"formGroup"],["color","primary","justify-content-center",""],["align-self-center","","size-md","6","size-lg","5","size-xs","12"],["text-center",""],[1,"display-6","text-black"],[1,"d-flex","justify-content-center","mt-4"],["shape","round",3,"click"],["padding",""],["type","mail","label","Correo","formControlName","email",1,"text-black"],[4,"ngIf"],["type","password","label","Clave","formControlName","password",1,"text-black"],["size","large","type","submit","color","primary","expand","block",3,"disabled","click"],[1,"text-danger"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),e._UZ(3,"img",2),e.qZA(),e.TgZ(4,"form",3)(5,"ion-grid")(6,"ion-row",4)(7,"ion-col",5)(8,"div",6)(9,"p",7),e._uU(10,"Iniciar sesi\xf3n"),e.qZA()(),e.TgZ(11,"div",8)(12,"ion-button",9),e.NdJ("click",function(){return o.completarCampos(1)}),e._uU(13,"Mario"),e.qZA(),e.TgZ(14,"ion-button",9),e.NdJ("click",function(){return o.completarCampos(2)}),e._uU(15,"Juan"),e.qZA(),e.TgZ(16,"ion-button",9),e.NdJ("click",function(){return o.completarCampos(3)}),e._uU(17,"Leonel"),e.qZA()(),e.TgZ(18,"div",10)(19,"ion-item"),e._UZ(20,"ion-input",11),e.YNc(21,b,3,0,"ng-container",12),e.qZA(),e.TgZ(22,"ion-item"),e._UZ(23,"ion-input",13),e.YNc(24,F,3,1,"ng-container",12),e.qZA()(),e.TgZ(25,"div",10)(26,"ion-button",14),e.NdJ("click",function(){return o.login(o.loginForm)}),e._uU(27,"Ingresar"),e.qZA()()()()()(),e._UZ(28,"hr"),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("formGroup",o.loginForm),e.xp6(17),e.Q6J("ngIf",null==o.mail?null:o.mail.hasError("email")),e.xp6(3),e.Q6J("ngIf",null==o.password?null:o.password.hasError("minlength")),e.xp6(2),e.Q6J("disabled",o.loginForm.invalid))},dependencies:[h.O5,n._Y,n.JJ,n.JL,s.YG,s.wI,s.W2,s.jY,s.pK,s.Ie,s.Nd,s.j9,n.sg,n.u],styles:[".bg[_ngcontent-%COMP%]{background-image:url(bg.a3f5591984efe0ee.png);background-repeat:no-repeat;background-size:100% 100%;background-color:#ccc;height:100%;width:100%}ion-fab[_ngcontent-%COMP%]{margin-bottom:var(--ion-safe-area-bottom, 5rem)}"]}),a})()}];let k=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(P),m.Bz]}),a})(),U=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,n.u5,s.Pc,k,n.UX]}),a})()}}]);